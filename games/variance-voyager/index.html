<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Games4Stats: Variance Voyager</title>
    <meta name="description"
        content="Games4Stats presents Variance Voyager: An interactive game that teaches Principal Components Analysis (PCA) through hands-on data exploration.">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;500;600;700&family=Space+Mono:wght@400;700&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
</head>

<body>
    <div class="background-effects">
        <div class="gradient-orb orb-1"></div>
        <div class="gradient-orb orb-2"></div>
        <div class="gradient-orb orb-3"></div>
    </div>

    <!-- Start Screen -->
    <div id="start-screen" class="screen active">
        <div class="glass-card hero-card">
            <div class="logo-container">
                <div class="logo-icon">
                    <svg viewBox="0 0 100 100" class="logo-svg">
                        <circle cx="50" cy="50" r="4" class="logo-point" style="--delay: 0" />
                        <circle cx="30" cy="35" r="3" class="logo-point" style="--delay: 0.1s" />
                        <circle cx="70" cy="65" r="3" class="logo-point" style="--delay: 0.2s" />
                        <circle cx="25" cy="60" r="2.5" class="logo-point" style="--delay: 0.3s" />
                        <circle cx="75" cy="40" r="2.5" class="logo-point" style="--delay: 0.4s" />
                        <circle cx="40" cy="25" r="2" class="logo-point" style="--delay: 0.5s" />
                        <circle cx="60" cy="75" r="2" class="logo-point" style="--delay: 0.6s" />
                        <circle cx="20" cy="45" r="2" class="logo-point" style="--delay: 0.7s" />
                        <circle cx="80" cy="55" r="2" class="logo-point" style="--delay: 0.8s" />
                        <line x1="15" y1="85" x2="85" y2="15" class="logo-axis" />
                    </svg>
                </div>
                <h1 class="game-title">Games4Stats</h1>
                <p class="game-subtitle">Variance Voyager: Master PCA</p>
            </div>

            <div class="intro-text">
                <p>Discover the hidden structure in data by finding the axes of <strong>maximum variance</strong>.</p>
                <p class="hint-text">Rotate your axis through the data cloud to capture the most spread!</p>
            </div>

            <button id="start-btn" class="primary-btn">
                <span>Begin Journey</span>
                <svg class="btn-arrow" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M5 12h14M12 5l7 7-7 7" />
                </svg>
            </button>

            <div class="feature-grid">
                <div class="feature-item">
                    <div class="feature-icon">üéØ</div>
                    <span>Interactive Learning</span>
                </div>
                <div class="feature-item">
                    <div class="feature-icon">üìä</div>
                    <span>Real-time Feedback</span>
                </div>
                <div class="feature-item">
                    <div class="feature-icon">üèÜ</div>
                    <span>Progressive Levels</span>
                </div>
            </div>
        </div>
    </div>

    <!-- Game Screen -->
    <div id="game-screen" class="screen">
        <header class="game-header">
            <div class="level-indicator glass-pill">
                <span class="level-label">Level</span>
                <span id="level-number" class="level-num">1</span>
                <span id="level-name" class="level-name">The Basics</span>
            </div>

            <div class="score-container glass-pill">
                <span class="score-label">Total Score</span>
                <span id="total-score" class="score-value">0</span>
            </div>
        </header>

        <main class="game-main">
            <div class="canvas-container glass-card">
                <canvas id="game-canvas"></canvas>
                <div class="axis-control" id="axis-control">
                    <div class="axis-handle" id="axis-handle"></div>
                </div>
                <div class="rotation-hint" id="rotation-hint">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path
                            d="M12 2v4M12 18v4M4.93 4.93l2.83 2.83M16.24 16.24l2.83 2.83M2 12h4M18 12h4M4.93 19.07l2.83-2.83M16.24 7.76l2.83-2.83" />
                    </svg>
                    <span>Drag to rotate axis</span>
                </div>
            </div>

            <aside class="stats-panel">
                <div class="stat-card glass-card">
                    <h3>Variance Captured</h3>
                    <div class="variance-meter">
                        <div class="meter-track">
                            <div id="variance-fill" class="meter-fill"></div>
                        </div>
                        <span id="variance-percent" class="meter-value">0%</span>
                    </div>
                    <div class="variance-breakdown">
                        <div class="variance-item">
                            <span class="variance-label">PC1:</span>
                            <span id="pc1-variance" class="variance-value">--</span>
                        </div>
                        <div class="variance-item" id="pc2-container" style="opacity: 0.3">
                            <span class="variance-label">PC2:</span>
                            <span id="pc2-variance" class="variance-value">--</span>
                        </div>
                    </div>
                </div>

                <div class="stat-card glass-card">
                    <h3>Current Angle</h3>
                    <div class="angle-display">
                        <span id="angle-value" class="angle-num">0</span>
                        <span class="angle-unit">¬∞</span>
                    </div>
                </div>

                <div class="stat-card glass-card objective-card">
                    <h3>Objective</h3>
                    <p id="objective-text">Find the axis that captures the maximum variance in the data.</p>
                    <div class="target-info">
                        <span>Target:</span>
                        <span id="target-percent">95%</span>
                    </div>
                </div>

                <button id="confirm-btn" class="primary-btn confirm-btn" disabled>
                    <span>Lock PC1</span>
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M5 13l4 4L19 7" />
                    </svg>
                </button>
            </aside>
        </main>

        <div id="tooltip" class="tooltip glass-card">
            <h4 id="tooltip-title">Principal Component 1</h4>
            <p id="tooltip-text">The first principal component is the direction in which the data varies the most.</p>
        </div>
    </div>

    <!-- Level Complete Screen -->
    <div id="complete-screen" class="screen">
        <div class="glass-card complete-card">
            <div class="complete-icon">üéâ</div>
            <h2>Level Complete!</h2>
            <div class="complete-stats">
                <div class="complete-stat">
                    <span class="stat-label">Variance Captured</span>
                    <span id="complete-variance" class="stat-value">98.5%</span>
                </div>
                <div class="complete-stat">
                    <span class="stat-label">Accuracy Bonus</span>
                    <span id="complete-bonus" class="stat-value">+250</span>
                </div>
                <div class="complete-stat highlight">
                    <span class="stat-label">Level Score</span>
                    <span id="complete-score" class="stat-value">1250</span>
                </div>
            </div>
            <div class="insight-box">
                <h4>üìö What You Learned</h4>
                <p id="insight-text">The first principal component always points in the direction of maximum variance in
                    your data.</p>
            </div>
            <button id="next-level-btn" class="primary-btn">
                <span>Next Level</span>
                <svg class="btn-arrow" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M5 12h14M12 5l7 7-7 7" />
                </svg>
            </button>
        </div>
    </div>

    <!-- Final Screen -->
    <div id="final-screen" class="screen">
        <div class="glass-card final-card">
            <div class="trophy-container">
                <div class="trophy">üèÜ</div>
                <div class="confetti"></div>
            </div>
            <h2>Congratulations!</h2>
            <p class="final-subtitle">You've mastered the fundamentals of PCA!</p>

            <div class="final-score-display">
                <span class="final-score-label">Final Score</span>
                <span id="final-score" class="final-score-value">0</span>
            </div>

            <div class="summary-box">
                <h4>üß† Key Takeaways</h4>
                <ul class="takeaways-list">
                    <li>PCA finds the directions of <strong>maximum variance</strong> in your data</li>
                    <li>Principal components are <strong>orthogonal</strong> (perpendicular) to each other</li>
                    <li>PC1 captures the most variance, PC2 the second most, and so on</li>
                    <li>PCA enables <strong>dimensionality reduction</strong> while preserving information</li>
                </ul>
            </div>

            <button id="restart-btn" class="primary-btn">
                <span>Play Again</span>
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M1 4v6h6M23 20v-6h-6" />
                    <path d="M20.49 9A9 9 0 0 0 5.64 5.64L1 10m22 4l-4.64 4.36A9 9 0 0 1 3.51 15" />
                </svg>
            </button>
        </div>
    </div>

    <script src="game.js"></script>
</body>

</html>